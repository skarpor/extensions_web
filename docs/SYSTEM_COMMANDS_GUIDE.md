# 系统命令功能使用指南

## 🎯 功能概述

系统设置中新增了"系统命令"标签页，提供了系统信息查看、命令帮助和自定义命令执行功能。

## ✨ 主要功能

### 1. 系统信息显示
- **操作系统**：显示当前操作系统类型和版本
- **Python版本**：显示当前Python版本
- **Python可执行文件路径**：显示完整的Python路径
- **当前目录**：显示程序运行目录
- **脚本路径**：显示当前脚本文件路径
- **是否为可执行文件**：显示是否为打包的exe文件
- **进程ID**：显示当前进程ID
- **运行时间**：显示程序运行时长
- **内存使用**：显示当前内存占用
- **CPU使用率**：显示CPU使用情况

### 2. 常用命令帮助
提供常见系统命令的帮助信息，包括：

#### 重启当前服务
- **Windows/Linux通用**：根据系统信息自动生成正确的重启命令
- **支持exe文件**：自动识别是否为打包文件
- **完整路径**：使用完整的Python路径

#### 系统检查命令
- **Python版本检查**：`python --version`
- **已安装包列表**：`pip list`
- **磁盘使用情况**：
  - Windows: `wmic logicaldisk get size,freespace,caption`
  - Linux: `df -h`
- **内存信息**：
  - Windows: `wmic OS get TotalVisibleMemorySize,FreePhysicalMemory`
  - Linux: `free -h`
- **进程列表**：
  - Windows: `tasklist`
  - Linux: `ps aux`
- **网络状态**：
  - Windows: `netstat -an`
  - Linux: `netstat -tuln`
- **当前目录**：
  - Windows: `cd`
  - Linux: `pwd`
- **文件列表**：
  - Windows: `dir`
  - Linux: `ls -la`
- **系统信息**：
  - Windows: `systeminfo`
  - Linux: `uname -a`

### 3. 自定义命令
- **添加命令**：点击"添加命令"按钮新增自定义命令
- **编辑功能**：支持命令名称、命令内容、描述的编辑
- **执行命令**：点击执行按钮运行命令
- **删除命令**：支持删除不需要的命令
- **保存功能**：命令保存到本地存储

### 4. 命令执行结果
- **实时显示**：命令执行结果实时显示
- **成功/失败状态**：清晰的状态标识
- **时间戳**：记录命令执行时间
- **输出内容**：完整的命令输出
- **错误信息**：详细的错误提示
- **结果清空**：支持清空历史结果

## 🔧 技术实现

### 后端API
- **系统信息接口**：`GET /api/v1/system/system/info`
- **命令执行接口**：`POST /api/v1/system/system/execute-command`

### 安全机制
- **权限验证**：需要系统管理权限
- **危险命令过滤**：禁止执行危险的系统命令
- **超时控制**：命令执行30秒超时
- **日志记录**：记录所有命令执行日志

### 数据存储
- **系统信息**：实时从系统获取
- **帮助信息**：前端静态数据，根据系统信息动态更新
- **自定义命令**：保存到localStorage

## 📋 使用步骤

### 1. 查看系统信息
1. 进入系统设置页面
2. 点击"系统命令"标签
3. 查看系统信息卡片中的详细信息

### 2. 参考命令帮助
1. 查看"常用命令帮助"部分
2. 根据操作系统选择合适的命令
3. 复制命令到自定义命令中使用

### 3. 执行自定义命令
1. 点击"添加命令"按钮
2. 填写命令名称、命令内容、描述
3. 点击"执行"按钮运行命令
4. 查看执行结果

### 4. 重启服务
1. 查看帮助信息中的重启命令
2. 复制到自定义命令中
3. 根据需要修改命令参数
4. 执行重启命令

## ⚠️ 注意事项

### 安全提醒
- 谨慎执行系统命令，避免误操作
- 不要执行不熟悉的命令
- 重启命令会中断当前服务

### 命令格式
- 使用完整的文件路径
- Windows路径使用双引号包围
- 单个命令占一行
- 避免使用管道和重定向符号

### 环境适配
- 命令需要根据操作系统调整
- Python路径可能因环境而异
- 某些命令可能需要管理员权限

## 🚀 最佳实践

### 1. 重启服务命令
```bash
# 对于Python脚本
"C:\Python\python.exe" "C:\app\main.py"

# 对于打包的exe文件
"C:\app\myapp.exe"
```

### 2. 系统监控命令
```bash
# Windows系统信息
systeminfo | findstr /C:"OS Name" /C:"Total Physical Memory"

# Linux系统信息
uname -a && free -h && df -h
```

### 3. 进程管理
```bash
# 查找特定进程 (Windows)
tasklist | findstr python

# 查找特定进程 (Linux)
ps aux | grep python
```

## 📊 功能特点

✅ **简单易用** - 直观的界面设计  
✅ **安全可靠** - 完善的安全机制  
✅ **灵活配置** - 支持自定义命令  
✅ **实时反馈** - 即时的执行结果  
✅ **跨平台** - 支持Windows和Linux  
✅ **权限控制** - 基于用户权限的访问控制  

这个系统命令功能为系统管理提供了强大而安全的工具，让管理员可以方便地执行各种系统操作和监控任务！
