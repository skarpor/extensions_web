# Data Query System 2.0 - 完整文档包

## 📋 文档概览

本文档包提供了 Data Query System 2.0 的完整技术文档，包括项目介绍、API接口、扩展开发指南、使用说明以及常用扩展脚本示例。

## 📚 文档列表

### 1. 核心文档

| 文档名称 | 描述 | 适用对象 |
|---------|------|----------|
| [项目文档.md](./项目文档.md) | 项目整体介绍、架构设计、技术栈、部署指南 | 开发者、运维人员、项目经理 |
| [使用说明.md](./使用说明.md) | 详细的用户使用指南、功能介绍、操作步骤 | 最终用户、系统管理员 |
| [API接口文档.md](./API接口文档.md) | 完整的REST API接口文档、请求响应示例 | 前端开发者、API集成开发者 |

### 2. 扩展开发文档

| 文档名称 | 描述 | 适用对象 |
|---------|------|----------|
| [扩展开发指南.md](./扩展开发指南.md) | 扩展系统架构、开发规范、最佳实践 | 扩展开发者、高级用户 |
| [扩展脚本示例.md](./扩展脚本示例.md) | 各种类型的扩展脚本示例和说明 | 扩展开发者、学习者 |

### 3. 扩展脚本库

| 脚本名称 | 功能描述 | 依赖库 |
|---------|----------|--------|
| [天气查询扩展.py](./常用扩展脚本/天气查询扩展.py) | 通过OpenWeatherMap API查询天气信息 | requests |
| [CSV数据分析扩展.py](./常用扩展脚本/CSV数据分析扩展.py) | 上传CSV文件进行数据分析和统计 | 标准库 |
| [网页内容抓取扩展.py](./常用扩展脚本/网页内容抓取扩展.py) | 抓取网页内容并提取有用信息 | requests, beautifulsoup4 |
| [系统信息监控扩展.py](./常用扩展脚本/系统信息监控扩展.py) | 获取系统资源使用情况和基本信息 | psutil |

## 🚀 快速开始

### 1. 系统部署

```bash
# 1. 克隆项目
git clone <repository-url>
cd extensions_web

# 2. 安装后端依赖
pip install -r requirements.txt

# 3. 安装前端依赖
cd fr
npm install

# 4. 启动后端服务
cd ..
python main.py

# 5. 启动前端服务
cd fr
npm run dev
```

### 2. 访问系统

- **前端界面**: http://localhost:5173
- **API文档**: http://localhost:8000/docs
- **默认账户**: admin / admin123

### 3. 安装扩展

1. 登录系统后进入"扩展管理"页面
2. 点击"添加扩展"按钮
3. 上传扩展脚本文件（从常用扩展脚本目录选择）
4. 配置扩展参数
5. 启用扩展并开始使用

## 🏗️ 系统架构

### 技术栈

**后端技术**
- FastAPI 0.68.0+ (Web框架)
- SQLAlchemy + Alembic (ORM和数据库迁移)
- JWT + OAuth2 (认证授权)
- APScheduler (任务调度)
- WebSocket (实时通信)

**前端技术**
- Vue 3.5.13 (前端框架)
- Vuetify 3.8.9 + Element Plus 2.10.2 (UI组件)
- Pinia 3.0.3 (状态管理)
- Axios 1.9.0 (HTTP客户端)

**数据库支持**
- SQLite (默认)
- PostgreSQL
- MySQL
- SQL Server

### 核心特性

- 🔧 **可扩展架构**: 基于插件的扩展系统
- 🔒 **安全沙箱**: 扩展安全执行环境
- 📁 **文件管理**: 完整的文件上传下载管理
- 💬 **实时聊天**: WebSocket实时通信
- ⏰ **任务调度**: 定时任务和异步任务
- 🗄️ **多数据库**: 支持多种数据库类型
- 🎨 **现代界面**: 响应式Web界面

## 📖 文档使用指南

### 对于系统管理员

1. **首先阅读**: [项目文档.md](./项目文档.md) - 了解系统整体架构
2. **部署参考**: [项目文档.md](./项目文档.md) 中的部署指南章节
3. **日常使用**: [使用说明.md](./使用说明.md) - 系统操作和维护

### 对于最终用户

1. **快速上手**: [使用说明.md](./使用说明.md) 中的快速开始章节
2. **功能使用**: [使用说明.md](./使用说明.md) 中的核心功能使用章节
3. **问题解决**: [使用说明.md](./使用说明.md) 中的故障排除章节

### 对于前端开发者

1. **API接口**: [API接口文档.md](./API接口文档.md) - 完整的API参考
2. **项目结构**: [项目文档.md](./项目文档.md) 中的项目结构章节
3. **前端架构**: 查看 `fr/` 目录下的Vue3项目

### 对于扩展开发者

1. **开发指南**: [扩展开发指南.md](./扩展开发指南.md) - 扩展开发完整指南
2. **示例学习**: [扩展脚本示例.md](./扩展脚本示例.md) - 各种扩展示例
3. **实际脚本**: `常用扩展脚本/` 目录下的可用脚本
4. **API参考**: [API接口文档.md](./API接口文档.md) 中的扩展相关接口

## 🔧 扩展开发快速入门

### 1. 基础扩展模板

```python
"""
我的第一个扩展
功能: 示例扩展功能
"""

def get_default_config():
    return {"api_key": "", "timeout": 30}

def get_config_form():
    return """
    <div class="mb-3">
        <label for="config.api_key" class="form-label">API密钥</label>
        <input type="text" class="form-control" id="config.api_key" 
               name="config.api_key" value="{{ config.api_key }}">
    </div>
    """

def get_query_form():
    return """
    <div class="mb-3">
        <label for="keyword" class="form-label">搜索关键词</label>
        <input type="text" class="form-control" id="keyword" name="keyword" required>
    </div>
    """

def execute_query(params, config=None):
    keyword = params.get("keyword", "")
    api_key = config.get("api_key", "")
    
    # 实现你的查询逻辑
    result = {"keyword": keyword, "results": []}
    
    return {"success": True, "data": result}
```

### 2. 开发流程

1. **编写脚本** - 实现必需的函数
2. **本地测试** - 验证功能正确性
3. **上传安装** - 通过系统界面安装
4. **配置启用** - 设置参数并启用扩展
5. **测试使用** - 在查询界面测试功能

### 3. 常用功能

- **文件处理**: 通过 `params.get("files")` 获取上传文件
- **数据库访问**: 通过 `db_manager` 参数执行SQL查询
- **网络请求**: 使用 `requests` 库进行HTTP请求
- **数据分析**: 处理CSV、JSON等格式数据

## 🛠️ 常见问题解决

### 安装问题

**Q: pip安装依赖失败**
```bash
# 使用国内镜像源
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

**Q: npm安装失败**
```bash
# 使用淘宝镜像
npm install --registry=https://registry.npmmirror.com
```

### 运行问题

**Q: 端口被占用**
```bash
# 修改config.py中的PORT配置
PORT = 8001  # 改为其他端口
```

**Q: 数据库连接失败**
- 检查数据库文件权限
- 验证数据库路径是否正确
- 查看错误日志获取详细信息

### 扩展问题

**Q: 扩展加载失败**
- 检查Python语法错误
- 确保实现了必需的函数
- 查看扩展日志文件

**Q: 扩展执行超时**
- 优化扩展代码性能
- 使用异步操作
- 增加超时时间配置

## 📞 技术支持

### 文档反馈

如果您在使用文档过程中发现问题或有改进建议，请：

1. **GitHub Issues**: 在项目仓库提交Issue
2. **邮件反馈**: 发送邮件到 docs@example.com
3. **社区讨论**: 参与社区讨论区

### 技术交流

- **开发者群组**: 加入开发者交流群
- **技术博客**: 关注项目技术博客
- **在线文档**: 访问在线文档站点

## 📄 许可证

本项目采用 MIT 许可证，详见项目根目录的 LICENSE 文件。

## 🔄 文档更新

- **当前版本**: v2.0.0
- **最后更新**: 2025-07-09
- **更新频率**: 随项目版本同步更新

### 版本历史

- **v2.0.0** (2025-07-09): 完整重构，新增扩展系统
- **v1.x.x**: 历史版本（已废弃）

---

## 📋 文档检查清单

在使用本文档包之前，请确认：

- [ ] 已阅读项目文档了解系统架构
- [ ] 已按照部署指南成功安装系统
- [ ] 已使用默认账户成功登录
- [ ] 已尝试安装和使用示例扩展
- [ ] 已了解基本的系统操作流程

如果以上步骤都已完成，您就可以开始深入使用和开发了！

---

*文档包最后更新: 2025-07-09*
*如有疑问，请参考具体文档或联系技术支持*
