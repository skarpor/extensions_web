<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chart.js å›¾è¡¨æ¸²æŸ“æµ‹è¯•</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            padding: 24px;
        }
        .chart-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin-top: 20px;
        }
        .chart-title {
            color: #2c3e50;
            margin-bottom: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-left: 8px;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .status {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .status-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“ˆ Chart.js å›¾è¡¨æ¸²æŸ“æµ‹è¯•</h1>
        <p>æµ‹è¯•æ‰©å±•å·¥ä½œå°ä¸­çš„å›¾è¡¨æ¸²æŸ“åŠŸèƒ½</p>

        <div class="status status-success">
            âœ… Chart.js åº“å·²åŠ è½½æˆåŠŸï¼ç‰ˆæœ¬: <span id="chartVersion"></span>
        </div>

        <!-- æŠ˜çº¿å›¾æµ‹è¯• -->
        <div class="chart-section">
            <div class="chart-title">
                <h3>ğŸ“Š æŠ˜çº¿å›¾æµ‹è¯•</h3>
                <div>
                    <button class="btn btn-primary" onclick="exportChart('lineChart', 'png')">å¯¼å‡ºPNG</button>
                    <button class="btn btn-success" onclick="updateChart('lineChart')">æ›´æ–°æ•°æ®</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="lineChart"></canvas>
            </div>
        </div>

        <!-- æŸ±çŠ¶å›¾æµ‹è¯• -->
        <div class="chart-section">
            <div class="chart-title">
                <h3>ğŸ“Š æŸ±çŠ¶å›¾æµ‹è¯•</h3>
                <div>
                    <button class="btn btn-primary" onclick="exportChart('barChart', 'png')">å¯¼å‡ºPNG</button>
                    <button class="btn btn-success" onclick="updateChart('barChart')">æ›´æ–°æ•°æ®</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="barChart"></canvas>
            </div>
        </div>

        <!-- é¥¼å›¾æµ‹è¯• -->
        <div class="chart-section">
            <div class="chart-title">
                <h3>ğŸ¥§ é¥¼å›¾æµ‹è¯•</h3>
                <div>
                    <button class="btn btn-primary" onclick="exportChart('pieChart', 'png')">å¯¼å‡ºPNG</button>
                    <button class="btn btn-success" onclick="updateChart('pieChart')">æ›´æ–°æ•°æ®</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
            </div>
        </div>

        <div class="status status-info">
            ğŸ’¡ è¿™äº›å›¾è¡¨ä½¿ç”¨ä¸æ‰©å±•å·¥ä½œå°ç›¸åŒçš„Chart.jsé…ç½®å’Œæ¸²æŸ“é€»è¾‘
        </div>
    </div>

    <script>
        // æ˜¾ç¤ºChart.jsç‰ˆæœ¬
        document.getElementById('chartVersion').textContent = Chart.version;

        // å­˜å‚¨å›¾è¡¨å®ä¾‹
        const charts = {};

        // ç”Ÿæˆéšæœºæ•°æ®
        function generateRandomData(count) {
            return Array.from({length: count}, () => Math.floor(Math.random() * 100) + 10);
        }

        // åˆ›å»ºæŠ˜çº¿å›¾
        function createLineChart() {
            const ctx = document.getElementById('lineChart').getContext('2d');
            charts.lineChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ'],
                    datasets: [
                        {
                            label: 'é”€å”®é¢',
                            data: generateRandomData(6),
                            borderColor: '#ff6b6b',
                            backgroundColor: 'rgba(255, 107, 107, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'åˆ©æ¶¦',
                            data: generateRandomData(6),
                            borderColor: '#4ecdc4',
                            backgroundColor: 'rgba(78, 205, 196, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'æœˆåº¦é”€å”®æ•°æ®',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'é‡‘é¢ (ä¸‡å…ƒ)'
                            }
                        }
                    }
                }
            });
        }

        // åˆ›å»ºæŸ±çŠ¶å›¾
        function createBarChart() {
            const ctx = document.getElementById('barChart').getContext('2d');
            charts.barChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['äº§å“A', 'äº§å“B', 'äº§å“C', 'äº§å“D', 'äº§å“E'],
                    datasets: [
                        {
                            label: 'æœ¬æœˆé”€é‡',
                            data: generateRandomData(5),
                            backgroundColor: '#45b7d1',
                            borderColor: '#3498db',
                            borderWidth: 1
                        },
                        {
                            label: 'ä¸Šæœˆé”€é‡',
                            data: generateRandomData(5),
                            backgroundColor: '#96ceb4',
                            borderColor: '#7fb069',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'äº§å“é”€é‡å¯¹æ¯”',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'é”€é‡ (ä»¶)'
                            }
                        }
                    }
                }
            });
        }

        // åˆ›å»ºé¥¼å›¾
        function createPieChart() {
            const ctx = document.getElementById('pieChart').getContext('2d');
            charts.pieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['æ¡Œé¢ç«¯', 'ç§»åŠ¨ç«¯', 'å¹³æ¿ç«¯', 'å…¶ä»–'],
                    datasets: [{
                        data: generateRandomData(4),
                        backgroundColor: [
                            '#ff6b6b',
                            '#4ecdc4', 
                            '#45b7d1',
                            '#feca57'
                        ],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'è®¿é—®è®¾å¤‡åˆ†å¸ƒ',
                            font: {
                                size: 16,
                                weight: 'bold'
                            }
                        },
                        legend: {
                            display: true,
                            position: 'right'
                        }
                    }
                }
            });
        }

        // å¯¼å‡ºå›¾è¡¨
        function exportChart(chartId, format) {
            const chart = charts[chartId];
            if (!chart) {
                alert('å›¾è¡¨æœªæ‰¾åˆ°');
                return;
            }

            try {
                const url = chart.toBase64Image();
                const link = document.createElement('a');
                link.href = url;
                link.download = `${chartId}-${Date.now()}.${format}`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                alert('å›¾è¡¨å¯¼å‡ºæˆåŠŸï¼');
            } catch (error) {
                alert('å¯¼å‡ºå¤±è´¥: ' + error.message);
            }
        }

        // æ›´æ–°å›¾è¡¨æ•°æ®
        function updateChart(chartId) {
            const chart = charts[chartId];
            if (!chart) {
                alert('å›¾è¡¨æœªæ‰¾åˆ°');
                return;
            }

            // æ›´æ–°æ•°æ®
            chart.data.datasets.forEach(dataset => {
                dataset.data = generateRandomData(dataset.data.length);
            });

            // é‡æ–°æ¸²æŸ“
            chart.update();
        }

        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        function initCharts() {
            createLineChart();
            createBarChart();
            createPieChart();
            console.log('æ‰€æœ‰å›¾è¡¨åˆå§‹åŒ–å®Œæˆ');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–å›¾è¡¨
        document.addEventListener('DOMContentLoaded', initCharts);
    </script>
</body>
</html>
