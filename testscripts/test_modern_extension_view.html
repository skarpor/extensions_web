<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>现代化扩展工作台测试</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            padding: 24px;
        }
        .test-section {
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid #e9ecef;
        }
        .test-section:last-child {
            border-bottom: none;
        }
        .test-section h2 {
            color: #2c3e50;
            margin-bottom: 16px;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }
        .feature-item {
            padding: 16px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .feature-item h4 {
            margin: 0 0 8px 0;
            color: #495057;
        }
        .feature-item p {
            margin: 0;
            color: #6c757d;
            font-size: 14px;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }
        .status-completed {
            background: #d4edda;
            color: #155724;
        }
        .status-simplified {
            background: #fff3cd;
            color: #856404;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 16px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin-top: 12px;
        }
        .access-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }
        .access-info h3 {
            margin: 0 0 12px 0;
        }
        .access-info p {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🚀 现代化扩展工作台</h1>
        <p>一个全新的、现代化、人性化的扩展执行环境，支持多种返回值类型的个性化显示。</p>

        <div class="test-section">
            <h2>✅ 已完成的功能</h2>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>🎨 现代化界面设计 <span class="status-badge status-completed">已完成</span></h4>
                    <p>渐变色导航栏、卡片式布局、响应式设计、流畅动画效果</p>
                </div>
                <div class="feature-item">
                    <h4>🔧 智能扩展管理 <span class="status-badge status-completed">已完成</span></h4>
                    <p>侧边栏扩展列表、图标分类显示、状态标识、快速选择</p>
                </div>
                <div class="feature-item">
                    <h4>📊 统一数据格式 <span class="status-badge status-completed">已完成</span></h4>
                    <p>所有扩展返回统一的字典格式，包含type、data、meta字段</p>
                </div>
                <div class="feature-item">
                    <h4>⚙️ 工作台设置 <span class="status-badge status-simplified">简化版</span></h4>
                    <p>基础设置功能，支持主题切换、布局调整、自动刷新等</p>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>🎯 支持的返回值类型</h2>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>📄 HTML类型 <span class="status-badge status-completed">已完成</span></h4>
                    <p>直接渲染HTML内容，支持样式和交互元素</p>
                </div>
                <div class="feature-item">
                    <h4>📊 Table类型 <span class="status-badge status-simplified">简化版</span></h4>
                    <p>表格数据显示，基础的排序和分页功能</p>
                </div>
                <div class="feature-item">
                    <h4>🖼️ Image类型 <span class="status-badge status-simplified">简化版</span></h4>
                    <p>图片显示，支持base64和URL格式</p>
                </div>
                <div class="feature-item">
                    <h4>📝 Text类型 <span class="status-badge status-simplified">简化版</span></h4>
                    <p>纯文本显示，支持复制功能</p>
                </div>
                <div class="feature-item">
                    <h4>📁 File类型 <span class="status-badge status-simplified">简化版</span></h4>
                    <p>文件下载，显示文件信息和下载按钮</p>
                </div>
                <div class="feature-item">
                    <h4>📈 Chart类型 <span class="status-badge status-simplified">简化版</span></h4>
                    <p>图表数据显示，需要Chart.js库来完整渲染</p>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>🔧 修复的扩展脚本</h2>
            <p>所有5个示例扩展脚本已修复，现在返回正确的字典格式：</p>
            
            <h4>1. HTML类型扩展 - 系统状态仪表板</h4>
            <div class="code-block">
return {
    "type": "html",
    "data": html_content,
    "meta": {
        "generated_at": "2025-07-19 21:30:00",
        "theme": "dark",
        "components": {...}
    }
}
            </div>

            <h4>2. Table类型扩展 - 进程监控器</h4>
            <div class="code-block">
return {
    "type": "table", 
    "data": [{"PID": 1234, "进程名": "python.exe", ...}],
    "meta": {
        "查询时间": "2025-07-19 21:30:00",
        "总进程数": 150
    }
}
            </div>

            <h4>3. Text类型扩展 - 系统信息报告</h4>
            <div class="code-block">
return {
    "type": "text",
    "data": "系统信息报告内容...",
    "meta": {
        "report_format": "detailed",
        "line_count": 45
    }
}
            </div>

            <h4>4. File类型扩展 - 日志文件生成器</h4>
            <div class="code-block">
return {
    "type": "file",
    "data": {
        "file_path": "/tmp/log.csv",
        "filename": "system_log.csv",
        "content_type": "text/csv"
    },
    "meta": {
        "log_type": "system_status",
        "compressed": false
    }
}
            </div>

            <h4>5. Chart类型扩展 - 性能图表</h4>
            <div class="code-block">
return {
    "type": "chart",
    "data": {
        "chart_type": "line",
        "chart_data": {"labels": [...], "datasets": [...]},
        "options": {...}
    },
    "meta": {
        "metric_type": "cpu_memory",
        "data_points": 20
    }
}
            </div>
        </div>

        <div class="test-section">
            <h2>🎨 前端设置功能</h2>
            <p>工作台设置只影响前端界面，不会影响后端接口：</p>
            <div class="feature-list">
                <div class="feature-item">
                    <h4>🎨 主题切换</h4>
                    <p>浅色/深色/自动主题，实时切换界面外观</p>
                </div>
                <div class="feature-item">
                    <h4>📐 布局调整</h4>
                    <p>侧边栏宽度、结果区域高度可自定义调整</p>
                </div>
                <div class="feature-item">
                    <h4>🔄 自动刷新</h4>
                    <p>可配置自动刷新扩展列表的间隔时间</p>
                </div>
                <div class="feature-item">
                    <h4>💾 本地存储</h4>
                    <p>设置保存在浏览器localStorage中，持久化保存</p>
                </div>
            </div>
        </div>

        <div class="access-info">
            <h3>🌐 访问方式</h3>
            <p><strong>路由地址：</strong> /extension/workspace</p>
            <p><strong>完整URL：</strong> http://localhost:5173/extension/workspace</p>
            <p><strong>权限要求：</strong> 需要登录用户权限</p>
            <p><strong>建议：</strong> 在侧边栏菜单中添加"扩展工作台"菜单项</p>
        </div>
    </div>
</body>
</html>
